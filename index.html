<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pacman</title>
    <style>
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }

        body {
            background: black;
        }

        div.row div {
            width: 20px;
            height: 20px;
            display: inline-block;
        }

        div.row {
            height: 20px;
        }

        div.brick {
            /*background-color: rgb(0, 0, 0);
            border: 1px solid rgb(4, 122, 93);*/
            background: url('img/wall.png');
            background-size: cover;
        }

        div.coin {
            background-color: blueviolet;
            background: url('img/coin.gif');
            background-size: cover;
        }

        div.empty {}

        div#pacman {
            background: url('img/pacman.gif');
            background-size: cover;
            width: 20px;
            height: 20px;
            position: absolute;
            top: 0;
            left: 0;
        }

        div#score {
            border: 1px solid white;
            width: 50px;
            text-align: center;
            color: white;
            padding: 10px;
        }
    </style>
</head>

<body>
    <div id="world"></div>
    <div id="pacman" style="top: 0px; left: 0px;"></div>
    <div id="score"><span>100</span></div>


    <script>
        let divWorld = document.querySelector('#world');
        let divPacman = document.querySelector('#pacman');
        let divScore = document.querySelector('#score');

        let score = 0;
        let pacman = {
            x: 1,
            y: 1
        }

        //15 x 30
        let world = [
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [1, 0, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1],
            [1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1],
            [1, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 1],
            [1, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 1],
            [1, 2, 1, 2, 2, 2, 2, 2, 1, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 1, 2, 2, 2, 2, 1, 2, 1],
            [1, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 1],
            [1, 2, 2, 2, 2, 2, 2, 2, 1, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 1, 2, 2, 2, 2, 2, 2, 1],
            [1, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 1],
            [1, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 1],
            [1, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 1],
            [1, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 1],
            [1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1],
            [1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
        ];

        function DisplayMonitor() {
            let output = '';

            for (let i = 0; i < world.length; i++) {
                output += "<div class = 'row'>";
                for (let j = 0; j < world[i].length; j++) {
                    if (world[i][j] == 1) {
                        output += "<div class = 'brick'></div>";
                    } else if (world[i][j] == 2) {
                        output += "<div class = 'coin'></div>";

                    } else if (world[i][j] == 0) {
                        output += "<div class = 'empty'></div>";
                    }
                }
                output += "</div>";
            }
            divWorld.innerHTML = output;
        }
        function DisplayPacman() {
            divPacman.style.top = pacman.y * 20 + "px";
            divPacman.style.left = pacman.x * 20 + "px";
            divScore.innerHTML = score;
            console.log(pacman.y)
            console.log(pacman.x)
        }

        DisplayMonitor();
        DisplayPacman();

        //1. Identify if its a brick

        document.onkeydown = function (e) {

            if (e.keyCode == 38) { //TOP
                if (world[pacman.y - 1][pacman.x] == 1){
                    console.log("wall");
                }else{
                    pacman.y--;
                } 
            } else if (e.keyCode == 40) { //BOTTOM
                if (world[pacman.y + 1][pacman.x] == 1){
                    console.log("wall");
                }else{
                    pacman.y++;
                }
            } else if (e.keyCode == 37) { //LEFT
                if (world[pacman.y][pacman.x - 1] == 1){
                    console.log("wall");
                }else{
                    pacman.x--;
                }
            } else if (e.keyCode == 39) { //RIGHT
                if (world[pacman.y][pacman.x + 1] == 1){
                    console.log("wall");
                }else{
                    pacman.x++;
                }
            }

            if (world[pacman.y][pacman.x] == 2) {
                world[pacman.y][pacman.x] = 0;
                score += 10;
                DisplayMonitor();
            }

            DisplayPacman();
        }
    </script>
</body>

</html>